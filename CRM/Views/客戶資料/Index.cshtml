@model CRM.Models.ViewModel.客戶資料VM

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<div class="row">
    <div class="col-lg-8">
        @using (Html.BeginForm("SearchFilter", "客戶資料", FormMethod.Post,new { id = "Form"}))
        {
            @Html.AntiForgeryToken()
            <div class="panel panel-default">
                <div class="panel-heading">篩選查詢</div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.客戶名稱)</label>
                                @Html.TextBoxFor(m => m.客戶名稱, new { @class = "form-control"})
                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.客戶分類Id)</label>
                                @CustomTypeDropdownList.CreateCustomerTypeDropdownList("客戶分類Id", ViewBag.CustomerTypeList)
                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.統一編號)</label>
                                @Html.TextBoxFor(m => m.統一編號, new { @class = "form-control"})
                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.電話)</label>
                                @Html.TextBoxFor(m => m.電話, new { @class = "form-control"})
                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.Email)</label>
                                @Html.TextBoxFor(m => m.Email, new { @class = "form-control"})
                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.排序)</label>

                                @Html.DropDownListFor(x => x.排序, new List<SelectListItem>
                                {
                                                    new SelectListItem() {Text = "", Value=""},
                                                    new SelectListItem() {Text = "客戶名稱", Value="客戶名稱"},
                                                    new SelectListItem() {Text = "客戶分類Id", Value="客戶分類Id"},
                                                    new SelectListItem() {Text = "統一編號", Value="統一編號"},
                                                    new SelectListItem() {Text = "電話", Value="電話"},
                                                    new SelectListItem() {Text = "Email", Value="Email"}
                                }, new { @class = "form-control"})

                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.升降)</label>

                                @Html.DropDownListFor(x => x.升降, new List<SelectListItem>
                                {
                                                    new SelectListItem() {Text = "", Value=""},
                                                    new SelectListItem() {Text = "升冪", Value="升冪"},
                                                    new SelectListItem() {Text = "降冪", Value="降冪"}
                                }, new { @class = "form-control"})

                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-1">
                            <div style="margin-top:25px">
                                <input type="submit" value="查詢" class="btn btn-info" />
                            </div>
                        </div>
                        <div class="col-lg-1">
                            <div style="margin-top:25px">
                                <input type="button" value="匯出" class="btn btn-success" id="Export"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading">特殊查詢</div>
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-5">
                            <div class="form-group">
                                <label>@Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().客戶分類) :</label>
                                @CustomTypeDropdownList.CreateCustomerTypeDropdownList("客戶分類Id", ViewBag.CustomerTypeList)
                                <p class="help-block"></p>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <div style="margin-top:25px">
                                <input type="submit" value="Search" class="btn btn-default" />
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().客戶名稱)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().客戶分類)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().統一編號)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().電話)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().傳真)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().地址)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.客戶資料s.FirstOrDefault().IsDeleted)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model.客戶資料s)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.客戶名稱)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.客戶分類.分類名稱)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.統一編號)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.電話)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.傳真)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.地址)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.IsDeleted)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
            </td>
        </tr>
    }

</table>

<script type="text/javascript">

    $("#Export").click(function () {
        $("#Form").attr('action', '@Url.Action("Export","客戶資料")');
        $("#Form").submit();
    });

</script>
